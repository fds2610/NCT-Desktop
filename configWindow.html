<!DOCTYPE html>
<html lang="de">
<head>
	<title>Config NCT Tray Notifier</title>
	<meta http-equiv="Content-Security-Policy" content="default-src 'unsafe-inline'" >
	<script>
		const electron = require('electron');
		const {ipcRenderer} = electron;
		function changeVal(i,v){
//			console.log(i + ' : ' + v);
			const {ipcRenderer} = require('electron');
			
			let newcontent = btoa(document.getElementById('ncurl').value);
			ipcRenderer.send('serverChange', newcontent );
			console.log(newcontent);
		}
		function connectServer() {
			const {ipcRenderer} = require('electron');
			ipcRenderer.send('connectServer', '' );
			console.log("sent IPC");
		}
	</script>
</head>
<body>
<div>
	<form id="configList">
	<h3>Config Settings</h3>
	<input type="text" id="ncurl" onchange="changeVal(this.id,this.value);" autofocus><label>&nbsp;Nextcloud hostname</label><br><br>
	<input type="submit" id="connect" onclick="connectServer();">Verbinden...</input>
	</form>
	
</div>
<script>

		console.log("Neu laden!");
		let arg = ipcRenderer.sendSync('initServerUrl', 'connection' );
		console.log(arg);
		document.getElementById('ncurl').value = atob(arg);
		//document.getElementById('ncuser').value = atob(CV[1]);
		//document.getElementById('ncpwd').value = atob(CV[2]);

</script>
</body>
</html>
